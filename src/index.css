@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "Segoe UI", sans-serif;
  color: #0f172a;
}

html,
body,
#root {
  height: 100%;
  overflow: hidden;
  overscroll-behavior: none;
}

body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(135deg, #eef3ff 0%, #e7effd 45%, #f5f7fb 100%);
  position: fixed;
  inset: 0;
  width: 100%;
  font-size: 15px;
  line-height: 1.55;
}

html.dark body {
  background: linear-gradient(150deg, #0a1220 0%, #0e1830 50%, #0a1220 100%);
}

textarea {
  resize: vertical;
}

.scrollbar::-webkit-scrollbar {
  width: 10px;
}

.scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.5);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

html.dark .scrollbar::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.35);
}

.scrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgba(148, 163, 184, 0.5) transparent;
  overscroll-behavior: none;
}

html.dark .scrollbar {
  scrollbar-color: rgba(148, 163, 184, 0.35) transparent;
}

.loading-dots span {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: currentColor;
  opacity: 0.3;
  animation: dotPulse 1.4s infinite ease-in-out;
}

.loading-dots span:nth-child(2) {
  animation-delay: 0.2s;
}

.loading-dots span:nth-child(3) {
  animation-delay: 0.4s;
}

.katex {
  color: currentColor;
  font-size: 1.05em;
}

.katex-display {
  overflow-x: auto;
  overflow-y: hidden;
  padding-bottom: 4px;
}

@keyframes dotPulse {
  0%,
  100% {
    opacity: 0.3;
    transform: translateY(0);
  }
  50% {
    opacity: 1;
    transform: translateY(-2px);
  }
}

.dl-scene {
  position: relative;
  height: 60vh;
  min-height: 320px;
  max-height: 720px;
  border-radius: 1.25rem;
  overflow: hidden;
  background: #0f172a;
}

@media (max-height: 700px) {
  .dl-scene {
    height: 55vh;
  }
}

.dl-video {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: brightness(0.9);
}

.dl-grain {
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='0.16'/%3E%3C/svg%3E");
  opacity: 0.5;
  pointer-events: none;
  mix-blend-mode: soft-light;
}

.dl-vignette {
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0) 55%, rgba(0, 0, 0, 0.3) 100%);
  pointer-events: none;
}

.dl-grid {
  position: absolute;
  inset: 0;
  opacity: 0;
  background-image:
    linear-gradient(rgba(0, 212, 255, 0.15) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 212, 255, 0.15) 1px, transparent 1px);
  background-size: 64px 64px, 64px 64px;
  transform: perspective(800px) rotateX(72deg) translateY(60%);
  filter: blur(0.3px);
}

.dl-grid-neon {
  opacity: 0.4;
}

.dl-grid-cinematic {
  opacity: 0.15;
}

.dl-grid-aurora {
  opacity: 0.15;
}

.dl-waves {
  position: absolute;
  inset: auto 0 12% 0;
  height: 18%;
  opacity: 0;
  background: radial-gradient(circle at 20% 0%, rgba(255, 255, 255, 0.25), transparent 40%),
    radial-gradient(circle at 60% 0%, rgba(255, 255, 255, 0.18), transparent 45%),
    radial-gradient(circle at 90% 0%, rgba(255, 255, 255, 0.12), transparent 45%);
  animation: waveShift 14s ease-in-out infinite alternate;
}

.dl-waves-ocean {
  opacity: 0.6;
}

.dl-waves-minimal {
  opacity: 0.15;
}

.dl-waves-cinematic {
  opacity: 0.2;
}

.dl-sun {
  position: absolute;
  width: 180px;
  height: 180px;
  border-radius: 999px;
  left: 10%;
  top: 20%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.95), rgba(249, 115, 22, 0.7));
  filter: blur(0.5px);
  animation: sunDrift 18s ease-in-out infinite alternate;
}

.dl-sun-neon {
  background: radial-gradient(circle, rgba(56, 189, 248, 0.9), rgba(99, 102, 241, 0.6));
}

.dl-sun-minimal {
  background: radial-gradient(circle, rgba(255, 255, 255, 0.8), rgba(148, 163, 184, 0.5));
}

.dl-sun-aurora {
  background: radial-gradient(circle, rgba(16, 185, 129, 0.8), rgba(34, 197, 94, 0.6));
}

.dl-sun-ocean {
  background: radial-gradient(circle, rgba(125, 211, 252, 0.8), rgba(34, 211, 238, 0.6));
}

.dl-clouds {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.12), transparent 45%),
    radial-gradient(circle at 80% 40%, rgba(255, 255, 255, 0.1), transparent 50%);
  animation: cloudDrift 26s linear infinite;
  opacity: 0.6;
}

.dl-clouds-cinematic {
  opacity: 0.5;
}

.dl-clouds-neon {
  opacity: 0.2;
  filter: drop-shadow(0 0 12px rgba(0, 212, 255, 0.4));
}

.dl-clouds-minimal {
  opacity: 0.15;
}

.dl-aurora {
  position: absolute;
  inset: 0;
  background: linear-gradient(120deg, rgba(16, 185, 129, 0.18), rgba(59, 130, 246, 0.12), transparent 70%);
  animation: auroraWave 22s ease-in-out infinite;
  opacity: 0.7;
  pointer-events: none;
}

.dl-aurora-cinematic,
.dl-aurora-neon,
.dl-aurora-minimal,
.dl-aurora-ocean {
  opacity: 0;
}

.dl-aurora-aurora {
  opacity: 0.8;
}

.dl-horizon {
  position: absolute;
  inset: auto 0 0 0;
  height: 35%;
  background: linear-gradient(to top, rgba(15, 23, 42, 0.9), transparent);
}

.dl-stars {
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.4), transparent 45%),
    radial-gradient(circle at 80% 30%, rgba(255, 255, 255, 0.35), transparent 50%),
    radial-gradient(circle at 60% 70%, rgba(255, 255, 255, 0.25), transparent 55%);
  opacity: 0.35;
}

@keyframes sunDrift {
  0% {
    transform: translateX(0) translateY(0) scale(1);
  }
  100% {
    transform: translateX(40px) translateY(-20px) scale(1.05);
  }
}

@keyframes cloudDrift {
  0% {
    transform: translateX(-10%);
  }
  100% {
    transform: translateX(10%);
  }
}

@keyframes auroraWave {
  0% {
    transform: translateY(0) rotate(0deg);
  }
  100% {
    transform: translateY(-12px) rotate(2deg);
  }
}

@keyframes waveShift {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-8%);
  }
}

.dl-fullscreen {
  position: fixed;
  inset: 0;
  z-index: 60;
  background: #0b1020;
  display: flex;
  align-items: center;
  justify-content: center;
}

.dl-fullscreen-inner {
  position: relative;
  width: 100%;
  height: 100%;
}

.dl-close {
  position: absolute;
  top: 16px;
  right: 16px;
}
